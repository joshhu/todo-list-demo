<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éŸ¿æ‡‰å¼è¨­è¨ˆæ¸¬è©¦ - Todo List</title>
    <style>
        /* æ¸¬è©¦å°ˆç”¨æ¨£å¼ */
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: #f5f5f5;
        }

        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .test-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .test-header h1 {
            margin: 0 0 10px 0;
            font-size: 2.5em;
        }

        .test-header p {
            margin: 0;
            opacity: 0.9;
            font-size: 1.1em;
        }

        .viewport-info {
            background: #e8f4fd;
            border: 1px solid #bee5eb;
            border-radius: 6px;
            padding: 15px;
            margin: 20px;
            text-align: center;
        }

        .viewport-info strong {
            color: #0c5460;
        }

        .test-section {
            padding: 30px;
            border-bottom: 1px solid #eee;
        }

        .test-section:last-child {
            border-bottom: none;
        }

        .test-section h2 {
            color: #333;
            margin-top: 0;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .test-grid {
            display: grid;
            gap: 20px;
            margin-bottom: 20px;
        }

        .test-card {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 20px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .test-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .test-card h3 {
            margin-top: 0;
            color: #495057;
            font-size: 1.3em;
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-pass { background: #28a745; }
        .status-fail { background: #dc3545; }
        .status-warning { background: #ffc107; }

        .feature-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .feature-list li:last-child {
            border-bottom: none;
        }

        .controls {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 6px;
            margin-bottom: 20px;
        }

        .controls button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            margin: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.2s ease;
        }

        .controls button:hover {
            background: #0056b3;
        }

        .controls button.active {
            background: #28a745;
        }

        .metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .metric {
            background: #e9ecef;
            padding: 15px;
            border-radius: 6px;
            text-align: center;
        }

        .metric-value {
            font-size: 2em;
            font-weight: bold;
            color: #007bff;
        }

        .metric-label {
            color: #6c757d;
            font-size: 0.9em;
            margin-top: 5px;
        }

        /* éŸ¿æ‡‰å¼æ–·é»æ¸¬è©¦ */
        @media (max-width: 480px) {
            .test-grid {
                grid-template-columns: 1fr;
            }
            .test-header h1 {
                font-size: 1.8em;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .test-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 769px) and (max-width: 1024px) {
            .test-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (min-width: 1025px) {
            .test-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        /* å‹•ç•«æ¸›å°‘æ¸¬è©¦ */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <div class="test-container">
        <header class="test-header">
            <h1 id="main-title">ğŸ“± éŸ¿æ‡‰å¼è¨­è¨ˆæ¸¬è©¦</h1>
            <p id="main-subtitle">Todo List æ‡‰ç”¨ç¨‹å¼éŸ¿æ‡‰å¼è¨­è¨ˆæ¸¬è©¦å·¥å…·</p>
        </header>

        <div class="viewport-info">
            <strong>ç•¶å‰è¦–çª—å°ºå¯¸:</strong>
            <span id="viewport-width">0</span> Ã— <span id="viewport-height">0</span> åƒç´ 
            | è¨­å‚™é¡å‹: <span id="device-type">æœªçŸ¥</span>
        </div>

        <div class="controls">
            <button onclick="setViewportSize(320, 568)" title="iPhone SE">ğŸ“± å°æ‰‹æ©Ÿ</button>
            <button onclick="setViewportSize(375, 667)" title="iPhone 8">ğŸ“± æ‰‹æ©Ÿ</button>
            <button onclick="setViewportSize(768, 1024)" title="iPad">ğŸ“± å¹³æ¿</button>
            <button onclick="setViewportSize(1280, 720)" title="å°å‹æ¡Œé¢">ğŸ–¥ï¸ å°æ¡Œé¢</button>
            <button onclick="setViewportSize(1920, 1080)" title="æ¡Œé¢">ğŸ–¥ï¸ æ¡Œé¢</button>
            <button onclick="resetViewport()" title="é‡ç½®è¦–çª—">ğŸ”„ é‡ç½®</button>
            <button onclick="testFeatures()" title="é‹è¡Œæ¸¬è©¦">ğŸ§ª é‹è¡Œæ¸¬è©¦</button>
        </div>

        <div class="test-section">
            <h2>ğŸ“Š è¦–çª—å’Œè¨­å‚™è³‡è¨Š</h2>
            <div class="metrics">
                <div class="metric">
                    <div class="metric-value" id="viewport-w">0</div>
                    <div class="metric-label">å¯¬åº¦ (px)</div>
                </div>
                <div class="metric">
                    <div class="metric-value" id="viewport-h">0</div>
                    <div class="metric-label">é«˜åº¦ (px)</div>
                </div>
                <div class="metric">
                    <div class="metric-value" id="pixel-ratio">1</div>
                    <div class="metric-label">åƒç´ æ¯”</div>
                </div>
                <div class="metric">
                    <div class="metric-value" id="orientation">æœªçŸ¥</div>
                    <div class="metric-label">æ–¹å‘</div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ¯ éŸ¿æ‡‰å¼ç‰¹æ€§æ¸¬è©¦</h2>
            <div class="test-grid">
                <div class="test-card">
                    <h3><span class="status-indicator status-pass"></span>ç¶²æ ¼ä½ˆå±€</h3>
                    <ul class="feature-list">
                        <li>âœ… å–®åˆ—ä½ˆå±€ (å°æ–¼ 640px)</li>
                        <li>âœ… é›™åˆ—ä½ˆå±€ (640px - 768px)</li>
                        <li>âœ… ä¸‰åˆ—ä½ˆå±€ (768px - 1024px)</li>
                        <li>âœ… å››åˆ—ä½ˆå±€ (å¤§æ–¼ 1024px)</li>
                    </ul>
                </div>

                <div class="test-card">
                    <h3><span class="status-indicator status-pass"></span>å­—é«”ç¸®æ”¾</h3>
                    <ul class="feature-list">
                        <li>âœ… åŸºç¤å­—é«”: 16px</li>
                        <li>âœ… å°è¢å¹•å­—é«”é©æ‡‰</li>
                        <li>âœ… æ¨™é¡ŒéŸ¿æ‡‰å¼ç¸®æ”¾</li>
                        <li>âœ… è¡Œé«˜è‡ªå‹•èª¿æ•´</li>
                    </ul>
                </div>

                <div class="test-card">
                    <h3><span class="status-indicator status-pass"></span>è§¸æ‘¸ç›®æ¨™</h3>
                    <ul class="feature-list">
                        <li>âœ… æœ€å°è§¸æ‘¸ç›®æ¨™: 44px</li>
                        <li>âœ… æŒ‰éˆ•é–“è·é©ç•¶</li>
                        <li>âœ… æ‰‹å‹¢æ”¯æ´</li>
                        <li>âœ… è§¸æ‘¸å›é¥‹</li>
                    </ul>
                </div>

                <div class="test-card">
                    <h3><span class="status-indicator status-pass"></span>åœ–ç‰‡é©æ‡‰</h3>
                    <ul class="feature-list">
                        <li>âœ… éŸ¿æ‡‰å¼åœ–ç‰‡</li>
                        <li>âœ… åœ–ç‰‡æ¯”ä¾‹ä¿æŒ</li>
                        <li>âœ… è¼‰å…¥å„ªåŒ–</li>
                        <li>âœ… åœ–ç‰‡æ‡¶åŠ è¼‰æº–å‚™</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ“‹ æ¸¬è©¦çµæœ</h2>
            <div id="test-results">
                <p>é»æ“Š "ğŸ§ª é‹è¡Œæ¸¬è©¦" æŒ‰éˆ•é–‹å§‹æ¸¬è©¦...</p>
            </div>
        </div>
    </div>

    <script>
        // æ›´æ–°è¦–çª—è³‡è¨Š
        function updateViewportInfo() {
            const width = window.innerWidth;
            const height = window.innerHeight;
            const pixelRatio = window.devicePixelRatio || 1;
            const orientation = width > height ? 'æ©«å‘' : 'ç›´å‘';

            let deviceType = 'æœªçŸ¥';
            if (width < 640) deviceType = 'æ‰‹æ©Ÿ';
            else if (width < 768) deviceType = 'å¤§æ‰‹æ©Ÿ/å°å¹³æ¿';
            else if (width < 1024) deviceType = 'å¹³æ¿';
            else if (width < 1280) deviceType = 'å°å‹æ¡Œé¢';
            else deviceType = 'æ¡Œé¢';

            // å®‰å…¨åœ°æ›´æ–° DOM å…§å®¹
            const elements = {
                'viewport-width': width,
                'viewport-height': height,
                'viewport-w': width,
                'viewport-h': height,
                'pixel-ratio': pixelRatio.toFixed(1),
                'orientation': orientation,
                'device-type': deviceType
            };

            Object.entries(elements).forEach(([id, value]) => {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = value;
                }
            });
        }

        // è¨­å®šè¦–çª—å°ºå¯¸
        function setViewportSize(width, height) {
            // å‰µå»ºæ¸¬è©¦æ¡†æ¶
            let testFrame = document.getElementById('test-frame');
            if (!testFrame) {
                testFrame = document.createElement('div');
                testFrame.id = 'test-frame';
                testFrame.style.cssText = 'border: 2px dashed #007bff; margin: 20px auto; padding: 20px; background: #f8f9fa; border-radius: 8px; max-width: 100%;';
                document.querySelector('.test-section').insertBefore(testFrame, document.querySelector('.test-section').firstChild);
            }

            testFrame.style.width = width + 'px';
            testFrame.style.height = height + 'px';
            testFrame.style.overflow = 'auto';

            // å®‰å…¨åœ°è¨­ç½®å…§å®¹
            const content = document.createElement('div');
            content.innerHTML = `
                <h3>æ¸¬è©¦æ¡†æ¶ (${width}Ã—${height}px)</h3>
                <p>é€™æ˜¯ä¸€å€‹æ¨¡æ“¬çš„è¨­å‚™è¦–çª—ï¼Œç”¨æ–¼æ¸¬è©¦éŸ¿æ‡‰å¼ä½ˆå±€ã€‚</p>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 10px; margin: 10px 0;">
                    <div style="background: #007bff; color: white; padding: 10px; text-align: center; border-radius: 4px;">é …ç›® 1</div>
                    <div style="background: #28a745; color: white; padding: 10px; text-align: center; border-radius: 4px;">é …ç›® 2</div>
                    <div style="background: #ffc107; color: black; padding: 10px; text-align: center; border-radius: 4px;">é …ç›® 3</div>
                    <div style="background: #dc3545; color: white; padding: 10px; text-align: center; border-radius: 4px;">é …ç›® 4</div>
                </div>
            `;

            testFrame.innerHTML = '';
            testFrame.appendChild(content);
        }

        // é‡ç½®è¦–çª—
        function resetViewport() {
            const testFrame = document.getElementById('test-frame');
            if (testFrame) {
                testFrame.remove();
            }
        }

        // é‹è¡Œå®Œæ•´æ¸¬è©¦
        function testFeatures() {
            const results = [];
            const width = window.innerWidth;

            // æ¸¬è©¦éŸ¿æ‡‰å¼æ–·é»
            results.push({
                test: 'ç•¶å‰è¢å¹•å¯¬åº¦',
                status: width + 'px',
                details: 'æª¢æ¸¬åˆ°çš„è¦–çª—å¯¬åº¦'
            });

            results.push({
                test: 'éŸ¿æ‡‰å¼æ–·é»',
                status: width < 640 ? 'æ‰‹æ©Ÿæ¨¡å¼' : width < 768 ? 'å¹³æ¿æ¨¡å¼' : width < 1024 ? 'å°æ¡Œé¢æ¨¡å¼' : 'æ¡Œé¢æ¨¡å¼',
                details: 'æ ¹æ“šå¯¬åº¦åˆ¤æ–·çš„è¨­å‚™é¡å‹'
            });

            // æ¸¬è©¦ç„¡éšœç¤™åŠŸèƒ½
            const reducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
            const highContrast = window.matchMedia('(prefers-contrast: high)').matches;
            const darkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;

            results.push({
                test: 'æ¸›å°‘å‹•ç•«åå¥½',
                status: reducedMotion ? 'âœ… æª¢æ¸¬åˆ°' : 'âš ï¸ æœªæª¢æ¸¬åˆ°',
                details: reducedMotion ? 'ç”¨æˆ¶åå¥½æ¸›å°‘å‹•ç•«æ•ˆæœ' : 'ç”¨æˆ¶æœªè¨­å®šå‹•ç•«åå¥½'
            });

            results.push({
                test: 'é«˜å°æ¯”åº¦æ¨¡å¼',
                status: highContrast ? 'âœ… æª¢æ¸¬åˆ°' : 'âš ï¸ æœªæª¢æ¸¬åˆ°',
                details: highContrast ? 'ç”¨æˆ¶åå¥½é«˜å°æ¯”åº¦' : 'ç”¨æˆ¶æœªè¨­å®šé«˜å°æ¯”åº¦åå¥½'
            });

            results.push({
                test: 'æ·±è‰²ä¸»é¡Œåå¥½',
                status: darkMode ? 'âœ… æª¢æ¸¬åˆ°' : 'âš ï¸ æœªæª¢æ¸¬åˆ°',
                details: darkMode ? 'ç”¨æˆ¶åå¥½æ·±è‰²ä¸»é¡Œ' : 'ç”¨æˆ¶åå¥½æ·ºè‰²ä¸»é¡Œ'
            });

            // æ¸¬è©¦è§¸æ‘¸æ”¯æ´
            const touchSupport = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
            results.push({
                test: 'è§¸æ‘¸æ”¯æ´',
                status: touchSupport ? 'âœ… æ”¯æ´' : 'âŒ ä¸æ”¯æ´',
                details: touchSupport ? 'è¨­å‚™æ”¯æ´è§¸æ‘¸äº¤äº’' : 'è¨­å‚™ä¸æ”¯æ´è§¸æ‘¸äº¤äº’'
            });

            // æ¸¬è©¦ç¶²æ ¼ä½ˆå±€
            const gridColumns = window.getComputedStyle(document.querySelector('.test-grid')).gridTemplateColumns;
            results.push({
                test: 'ç¶²æ ¼ä½ˆå±€',
                status: 'âœ… æ­£å¸¸',
                details: 'ç•¶å‰ç¶²æ ¼: ' + gridColumns
            });

            // å®‰å…¨åœ°é¡¯ç¤ºæ¸¬è©¦çµæœ
            const resultsContainer = document.getElementById('test-results');
            const timestamp = new Date().toLocaleString();

            // å‰µå»ºçµæœå…§å®¹
            const resultsHeader = document.createElement('h3');
            resultsHeader.textContent = 'æ¸¬è©¦å®Œæˆ';

            const timestampP = document.createElement('p');
            timestampP.innerHTML = '<strong>æ¸¬è©¦æ™‚é–“:</strong> ' + timestamp;

            const resultsList = document.createElement('div');

            results.forEach(result => {
                const resultDiv = document.createElement('div');
                resultDiv.style.cssText = 'padding: 10px; margin: 5px 0; background: #f8f9fa; border-left: 4px solid ' +
                    (result.status.includes('âœ…') ? '#28a745' : result.status.includes('âš ï¸') ? '#ffc107' : '#dc3545') +
                    '; border-radius: 4px;';

                const strong = document.createElement('strong');
                strong.textContent = result.test + ': ';

                const statusText = document.createTextNode(result.status);

                const br = document.createElement('br');

                const small = document.createElement('small');
                small.textContent = result.details;

                resultDiv.appendChild(strong);
                resultDiv.appendChild(statusText);
                resultDiv.appendChild(br);
                resultDiv.appendChild(small);

                resultsList.appendChild(resultDiv);
            });

            const tipP = document.createElement('p');
            const tipEm = document.createElement('em');
            tipEm.textContent = 'ğŸ’¡ æç¤º: èª¿æ•´ç€è¦½å™¨è¦–çª—å¤§å°æˆ–åˆ‡æ›è¨­å‚™æ¨¡å¼ä¾†é‡æ–°æ¸¬è©¦éŸ¿æ‡‰å¼ç‰¹æ€§';
            tipP.appendChild(tipEm);

            // æ¸…ç©ºä¸¦æ·»åŠ çµæœ
            resultsContainer.innerHTML = '';
            resultsContainer.appendChild(resultsHeader);
            resultsContainer.appendChild(timestampP);
            resultsContainer.appendChild(resultsList);
            resultsContainer.appendChild(tipP);
        }

        // ç›£è½è¦–çª—è®ŠåŒ–
        window.addEventListener('resize', updateViewportInfo);
        window.addEventListener('orientationchange', updateViewportInfo);

        // åˆå§‹åŒ–
        updateViewportInfo();

        // è‡ªå‹•é‹è¡Œæ¸¬è©¦
        setTimeout(testFeatures, 1000);
    </script>
</body>
</html>